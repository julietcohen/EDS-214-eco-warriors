---
title: "eco-warriors"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(janitor)
library(ggExtra)
library(lubridate)
```

## Read in the data from the Duck
## Clean names with Janitor package
## Tell R NA values are read as -9999

```{r}
Q1 <- read.csv(here("/courses", "EDS214", "eco-warriors", "data", "QuebradaCuenca1-Bisley.csv" ), na = "-9999") %>% clean_names() %>% mutate(sample_date = mdy(sample_date))

Q2 <- read.csv(here("/courses", "EDS214", "eco-warriors", "data", "QuebradaCuenca2-Bisley.csv"), na = "-9999") %>% clean_names() %>% mutate(sample_date = mdy_hm(sample_date))

Q3 <- read.csv(here("/courses", "EDS214", "eco-warriors", "data", "QuebradaCuenca3-Bisley.csv"), na = "-9999") %>% clean_names() %>% mutate(sample_date = mdy(sample_date))

RPM <- read.csv(here("/courses", "EDS214", "eco-warriors", "data", "RioMameyesPuenteRoto.csv"), na = "-9999") %>% clean_names() %>% mutate(sample_date = mdy(sample_date))

```
## select columns
```{r}

Q1.1 <- Q1 %>% 
  select(sample_id, sample_date, k, no3)

Q2.1 <- Q2 %>% 
  select(sample_id, sample_date, k, no3)

Q3.1 <- Q3 %>% 
  select(sample_id, sample_date, k, no3)

RPM.1 <- RPM %>% 
  select(sample_id, sample_date, k, no3)


```

# pulling out the year from the sample_date column
```{r}
Q1.1 <- Q1.1 %>% mutate(sample_date = lubridate::year(sample_date))
Q2.1 <- Q2.1 %>% mutate(sample_date = lubridate::year(sample_date))
Q3.1 <- Q3.1 %>% mutate(sample_date = lubridate::year(sample_date))
RPM.1 <- RPM.1 %>% mutate(sample_date = lubridate::year(sample_date)) 



```


# Binding the datasets together into one data frame

```{r}
combined_site_ab <- rbind(Q1.1, Q2.1)
combined_site_cd <- rbind(Q3.1, RPM.1)

combined_sites <- rbind(combined_site_ab, combined_site_cd)
```

## Take summary statistics so we can plot one point per year for each variable

```{r}
## summary stats!!
```

## plot the data!

```{r}


ggplot(data = combined_sites, aes(x = sample_date, y = k)) +
  geom_point(aes(color = sample_id)) +
  labs(x = "Year",
       y = "K (mg/l",
       title = "Potassium levels over time")

ggplot(data = combined_sites, aes(x = sample_date, y = no3)) +
  geom_line(aes(line = sample_id)) +
  labs(x = "Year",
       y = "Nitrate (ug/l)",
       title = "Nitrate levels over time")



```

